<!DOCTYPE html>
  <html lang="sl">
   <head>
       <meta charset="UTF-8">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <title>Napredek</title>
       <link rel="stylesheet" href="styles.css"> <!-- Povezava do istega CSS -->
       <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
   </head>
   <body>
       <h1>Napredek游눩</h1>
   
       <!-- Prikaz napredka -->
       <div id="progressStats">
           <h3>Napredek</h3>
           <p id="goalProgressText">游늳 Napredek za ta teden: 0/0</p>
           <p id="allTimeStats">
               <strong>Skupno 코tevilo sklec: 0</strong><br>
               <strong>Povpre캜je na dan: 0</strong><br>
               <strong>Najve캜ji set: 0</strong>
           </p>
       </div>
   <div id="streakDisplay"></div>
 
       <!-- Gumb za prenos napredka kot sliko -->
       <button id="downloadProgressBtn">Prenesi napredek kot sliko</button>

     <div id="ai-suggestion" style="margin-top:10px; font-weight: bold;"></div>

<button onclick="getAISuggestion()">Dobi AI nasvet</button>

   <!-- Gumb, ki deluje kot povezava na doma캜o stran -->
   <a href="index.html">
     <button class="home-btn">Nazaj na doma캜o stran</button>
   </a>



       <script src="progress.js"></script>
          <script>
  async function getAISuggestion() {
    const apiKey = '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'; // Tukaj vnesi svoj pravi API klju캜

    // Preberemo podatke iz localStorage
    const exerciseData = JSON.parse(localStorage.getItem('exerciseData'));
    const weeklyGoal = JSON.parse(localStorage.getItem('weeklyGoal'));

    // Preverimo, ali so podatki prisotni
    if (!exerciseData || !weeklyGoal) {
      alert('Podatki niso na voljo v localStorage!');
      return;
    }

    const lastMaxPushups = exerciseData.lastMaxPushups || 0; // zadnji maksimum
    const weeklyTotal = exerciseData.weeklyTotal || 0; // tedensko 코tevilo

    // Generiramo prompt za AI
    const prompt = `Uporabnik je zadnji캜 naredil ${lastMaxPushups} sklec. 
    Skupno ta teden je naredil ${weeklyTotal} sklec. 
    Njegov tedenski cilj je ${weeklyGoal}. 
    Svetuj mu, kak코en naj bo njegov naslednji maksimum in tedenski cilj, v motivacijskem tonu.`;

    // Po코ljemo zahtevo na OpenAI API
    const response = await fetch('https://api.openai.com/v1/chat/completions', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${apiKey}`
      },
      body: JSON.stringify({
        model: "gpt-3.5-turbo", // Lahki model (cenej코i in hitrej코i)
        messages: [{ role: "user", content: prompt }]
      })
    });

    // Obdelava odgovora
    const data = await response.json();
    const aiText = data.choices[0].message.content;

    // Prikaz odgovora v HTML elementu
    document.getElementById('ai-suggestion').innerText = aiText;
  }
</script>
   </body>
